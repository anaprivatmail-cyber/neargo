
<!doctype html>
<html lang="sl">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Prijava / Registracija</title>
		<link rel="preconnect" href="https://rsms.me" />
		<style>
			:root { --bg:#0b1220; --panel:#141c2f; --text:#e8ecf3; --muted:#94a3b8; --primary:#2563eb; --danger:#ef4444; --ok:#16a34a; --border:#22304a }
			html,body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,sans-serif}
			a{color:var(--primary);text-decoration:none}
			.container{max-width:880px;margin:40px auto;padding:0 16px}
			.btn{appearance:none;border:1px solid var(--border);background:#1b2438;color:var(--text);padding:10px 14px;border-radius:10px;cursor:pointer}
			.btn:hover{border-color:#2c3f66}
			.btn--primary{background:var(--primary);border-color:var(--primary);color:#fff}
			.btn.is-loading{opacity:.7;pointer-events:none}
			.grid{display:grid;gap:16px}
			.field{display:grid;gap:6px}
			.label{font-weight:600}
			input,select{background:#0f1626;border:1px solid var(--border);border-radius:10px;color:var(--text);padding:10px 12px}
			input::placeholder{color:var(--muted)}
			small.hint{color:var(--muted)}
			.error{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.35);color:#fecaca;padding:10px 12px;border-radius:10px}
			.success{background:rgba(22,163,74,.08);border:1px solid rgba(22,163,74,.35);color:#bbf7d0;padding:10px 12px;border-radius:10px}
			.row{display:flex;gap:8px;align-items:center}
			.row > *{flex:1}
			.section{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:18px}
			.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
			.tabs{display:flex;gap:8px}
			.tab{background:#0f1626;border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
			.tab.is-active{background:#1d2842;border-color:#2c3f66}
			.oauth{display:flex;gap:10px;flex-wrap:wrap}
			.btn-google,.btn-apple{display:flex;align-items:center;gap:8px}
			.icon{width:18px;height:18px;display:inline-flex;align-items:center;justify-content:center}
			.code-row{display:none}
			.code-row.show{display:block}
			.muted{color:var(--muted)}
			.hidden{display:none}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>Prijava / Registracija</h1>

			<!-- Primer gumba, ki zahteva login -->
			<button class="btn" data-requires-auth>Vpis dogodka</button>
			<button class="btn" data-requires-auth>Nakup kupona</button>
			<button class="btn" data-requires-auth>Analitika</button>
			<button class="btn" data-requires-auth>QR</button>
			<button class="btn" data-requires-auth>Premium</button>
			<button class="btn" data-requires-auth>Točke</button>

			<!-- Modal -->
			<dialog id="auth-modal" class="section" style="max-width:560px;width:100%">
				<div class="header">
					<div class="tabs">
						<button class="tab is-active" data-tab="login">Prijava</button>
						<button class="tab" data-tab="register">Registracija</button>
					</div>
					<button id="auth-close" class="btn">Zapri</button>
				</div>

				<form id="auth-form" class="grid">
					<div id="alert" class="error hidden"></div>
					<div id="ok" class="success hidden"></div>

					<div class="field">
						<label class="label" for="email">E‑pošta</label>
						<input id="email" type="email" placeholder="ime@domena.si" autocomplete="email" />
					</div>

					<div class="field">
						<label class="label" for="password">Geslo</label>
						<input id="password" type="password" placeholder="••••••••" autocomplete="current-password" />
						<small class="hint">Najmanj 6 znakov, vsaj 1 velika črka in 1 poseben znak.</small>
					</div>

					<div class="field">
						<label class="label">Telefon</label>
						<div class="row">
							<select id="country-select" aria-label="Država"></select>
							<input id="phone" type="tel" inputmode="tel" placeholder="npr. 041 234 567" autocomplete="tel" />
						</div>
						<small class="hint muted">Države: EU + ZDA. Številka se pretvori v E.164 za SMS.</small>
					</div>

					<div id="code-row" class="field code-row">
						<label class="label" for="code">Koda</label>
						<input id="code" type="text" inputmode="numeric" maxlength="8" placeholder="Vnesi kodo" />
					</div>

					<div class="row">
						<button type="button" id="btn-sms" class="btn">Preveri s SMS kodo</button>
						<button type="button" id="btn-email" class="btn">Preveri z email kodo</button>
					</div>

					<div class="row">
						<button type="button" id="btn-verify" class="btn btn--primary hidden">Potrdi kodo</button>
						<a id="forgot-link" href="#" class="muted" style="margin-left:auto">Pozabljeno geslo?</a>
					</div>

					<div class="oauth">
						<button type="button" id="btn-google" class="btn btn-google">
							<span class="icon">
								<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
									<g>
										<path fill="#4285F4" d="M24 9.5c3.54 0 6.7 1.22 9.19 3.22l6.85-6.85C35.64 2.01 30.13 0 24 0 14.73 0 6.41 5.48 2.44 13.44l8.44 6.56C12.44 13.01 17.77 9.5 24 9.5z"/>
										<path fill="#34A853" d="M46.09 24.56c0-1.54-.14-3.03-.39-4.47H24v8.47h12.44c-.54 2.77-2.17 5.12-4.62 6.7l7.19 5.59C43.99 36.01 46.09 30.77 46.09 24.56z"/>
										<path fill="#FBBC05" d="M12.88 28.5c-.41-1.22-.64-2.52-.64-3.88s.23-2.66.64-3.88l-8.44-6.56C2.16 17.99 0 21.77 0 26c0 4.23 2.16 8.01 5.44 10.82l8.44-6.56z"/>
										<path fill="#EA4335" d="M24 46c6.13 0 11.64-2.01 15.85-5.48l-7.19-5.59c-2.01 1.35-4.59 2.15-7.66 2.15-6.23 0-11.56-3.51-13.88-8.56l-8.44 6.56C6.41 42.52 14.73 48 24 48z"/>
									</g>
								</svg>
							</span> Prijava z Google
						</button>
						<button type="button" id="btn-apple" class="btn btn-apple">
							<span class="icon"></span> Prijava z Apple
						</button>
					</div>
				</form>
			</dialog>
		</div>

		<!-- Utils morajo biti naloženi pred app-login -->
		<script src="/assets/utils.js"></script>
		<script src="/assets/app-login.js"></script>

		<script>
			// Odpri modal na vseh gumbih, ki zahtevajo prijavo
			document.querySelectorAll('[data-requires-auth]').forEach(el => {
				el.addEventListener('click', (e) => {
					e.preventDefault();
					window.Auth.open();
				});
			});
		</script>
	</body>
</html>
