run: |
  echo "Calling Supabase function..."

  # Perform the request in one single-line curl command
  HTTP_STATUS=$(curl -s -o response.txt -w "%{http_code}" \
    -X POST "$FUNCTION_URL" \
    -H "Authorization: Bearer $SUPABASE_ANON_KEY" \
    -H "Content-Type: application/json" \
    --data '{}')

  # Print response body
  echo "Response body:"
  cat response.txt

  # Print HTTP status
  echo "HTTP status: $HTTP_STATUS"

  # Determine success or failure
  if [ "$HTTP_STATUS" -ge 200 ] && [ "$HTTP_STATUS" -lt 300 ]; then
    echo "Success"
    exit 0
  else
    echo "Failed"
    exit 1
  fi

